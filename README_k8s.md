# 1
- Запуск minikube
```minikube start --vm-driver=docker --cpus=6 --memory=6G --nodes=3```
- Проверка адреса minikube
```minikube ip```
- Установка аддона
```minikube addons enable ingress```
- Запускаем все сущности из директории (под + сервис + ингресс)
```kubectl apply -f .```
- Открываем туннель (для macOS)
```minikube tunnel```
- Дописываем в `/etc/hosts`:
```
192.168.49.2            shvm-ai.ru
127.0.0.1               shvm-ai.ru
```

Переходим в бразуер на адрес

# 2
- Удаляем под и видим что теперь ошибка 503 в браузере
- Поднимаем под и видим что все еще недоступен
- Нам поможет RS, поднимаем его и видим что у нас 4 пода (1 из POD и 3 из RS). Прилетают разные ответы
- Удаляем старый под и видим что он автоматически возвращается
- Теперь применяем деплоймент. Можно удалить RS (перемещаем его и под в `move_after_use`)
- Смотрим ревизию деплоймента `kubectl rollout history deployment/hse-deployment`
- Меняем образ контейнера, видим постепенно обновление контейнеров
- Пробуем выполнить откат (при это файл деплоймента не будет изменен) `kubectl rollout undo deployment hse-deployment`
- Создаем CM и приписываем его в деплоймент (`/etc/config`)
- Создаем секреты. Для конвертации из base64:
```
echo -n 'admin' | base64     # → YWRtaW4=
echo -n 'secret' | base64    # → c2VjcmV0
```
- Прокидываем их в деплоймент